---
title: "Grilles orientÃ©es en agriculture de prÃ©cision"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Grilles orientÃ©es en agriculture de prÃ©cision}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(collapse = TRUE, comment = "#>")
library(rgeoag)
library(sf)
library(ggplot2)
sf::sf_use_s2(F)
```

## ğŸ¯ Objectif

Les grilles orientÃ©es sont un outil essentiel pour organiser lâ€™espace agricole en unitÃ©s dâ€™Ã©chantillonnage, de traitement ou dâ€™observation. Elles facilitent la planification des opÃ©rations sur le terrain en suivant lâ€™orientation dominante des champs.


---

## ğŸ—‚ï¸ Exemple 1 : Grille de base avec orientation automatique

Ce premier exemple gÃ©nÃ¨re une grille avec largeur et longueur spÃ©cifiÃ©es. Lâ€™orientation est dÃ©duite automatiquement selon lâ€™axe dominant du champ.

```{r}
champ <- champs_exemple |> dplyr::slice(1) |> sf::st_sf() |> st_utm()
grille1 <- st_grille(champ, largeur = 100, longueur = 300)
plot(grille1)
```

> ğŸ“Œ *Utilisation typique : structuration rÃ©guliÃ¨re pour un plan dâ€™Ã©chantillonnage ou une prescription uniforme.*

---

## ğŸ”„ Exemple 2 : Grille avec angle spÃ©cifiÃ© manuellement

On peut forcer un angle dâ€™orientation personnalisÃ©, par exemple pour sâ€™aligner sur une route ou une structure de drainage existante.

```{r}
grille2 <- st_grille(champ, largeur = 100, longueur = 300, angle = 45)
plot(grille2)
```

> ğŸ“ *Permet dâ€™ajuster lâ€™alignement Ã  une infrastructure rÃ©elle, mÃªme si elle ne correspond pas Ã  lâ€™orientation naturelle du champ.*

---

## ğŸ“ Exemple 3 : Grille numÃ©rotÃ©e depuis un coin spÃ©cifique

On peut choisir le coin dâ€™origine de la numÃ©rotation (`SO`, `NO`, `SE`, `NE`). Ici, lâ€™origine est en coin nord-ouest.

```{r}
grille3 <- st_grille(champ, largeur = 100, longueur = 300, coin = "NO")
plot(grille3)
```

> ğŸ§­ *Utile pour aligner la grille Ã  la logique opÃ©rationnelle du producteur (ex. : toujours commencer au coin nord-ouest).*

---

## â• Exemple 4 : Grille en quinconce

Le mode `quinconce = TRUE` dÃ©cale une ligne sur deux horizontalement, ce qui permet une couverture plus uniforme dans certains cas (ex. : Ã©chantillonnage reprÃ©sentatif).

```{r}
grille4 <- st_grille(champ, largeur = 100, longueur = 300, quinconce = TRUE)
plot(grille4)
```


---

## ğŸ”˜ Exemple 5 : Extraire les centroÃ¯des au lieu des polygones

Si `points = TRUE`, la grille retourne des points (centroÃ¯des) plutÃ´t que des polygones.

```{r}
grille_pts <- st_grille(champ, largeur = 100, longueur = 300, points = TRUE)
plot(grille_pts)
```

> ğŸ¯ *AdaptÃ© pour un Ã©chantillonnage ponctuel ou la dÃ©finition de points de contrÃ´le GPS.*

---

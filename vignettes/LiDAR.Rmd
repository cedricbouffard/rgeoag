---
title: "Donn√©es LiDAR et agriculture de pr√©cision"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Donn√©es LiDAR et agriculture de pr√©cision}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Qu'est-ce que le LiDAR?

Le LiDAR (Light Detection and Ranging) est une technologie de t√©l√©d√©tection qui utilise des impulsions laser pour mesurer la distance entre un capteur et la surface de la Terre. En agriculture de pr√©cision, les donn√©es LiDAR permettent de :

-   Reconstituer un mod√®le du terrain (DTM ‚Äì Digital Terrain Model)

-   Identifier les d√©pressions, pentes et zones humides

-   Mod√©liser le ruissellement, l‚Äô√©rosion et la variabilit√© du sol

-   Guider l‚Äôam√©nagement de zones tampon, de drainage ou de parcelles de culture

## Le mod√®le de surface vs. le mod√®le de terrain

-   **MNE (Digital Surface Model)** : inclut les b√¢timents, arbres, etc.

-   **MNT (Digital Terrain Model)** : repr√©sente uniquement le sol

## Utiliser la fonction `lidar()`

La fonction `lidar()` permet d‚Äôinterroger automatiquement les donn√©es LiDAR disponibles sur le service STAC de Ressources naturelles Canada, de les recadrer √† une zone d‚Äôint√©r√™t, et de les sauvegarder si souhait√©.

### Exemple d‚Äôutilisation

```{r}

# T√©l√©charger et recadrer les mod√®les de surface (MNT) pour un champ
library(rgeoag)
resultats <- lidar(champs_exemple, 
                   dossier = NULL,
                   recent= FALSE,
                   mne = FALSE)
resultats

```

Chaque √©l√©ment de la liste retourn√©e correspond √† un raster pour une ann√©e donn√©e.

## üñºÔ∏è Visualisation des r√©sultats

Vous pouvez visualiser le mod√®le en utilisant `terra::plot()` ou en int√©grant le raster dans une carte interactive avec `leaflet`.

```{r}
terra::plot(resultats[[1]]) 
```

On peut √©galement utiliser la fonction `geom_topo`, qui permet de visualiser la topographie en ggplot

```{r}
ggplot2::ggplot() +
  geom_topo(resultats[[1]],
            intervalle = .3,
            ombrage = TRUE)
```

En tant que couche ggplot, il est facile ensuite de personnaliser la carte.

```{r}
ggplot2::ggplot() +
  ggspatial::annotation_map_tile(zoomin =0,progress = "none")+
  geom_topo(resultats[[1]],
            intervalle = .3,
            ombrage = TRUE) + 
  ggspatial::annotation_scale()+
  ggplot2::theme_void()+
  ggplot2::labs(title = "Mod√®le num√©rique de terrain d√©riv√© du LiDAR 2021")
  
```
